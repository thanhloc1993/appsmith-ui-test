{
  "unpublishedCollection": {
    "name": "JS_Sort_Columns",
    "pageId": "architecture-lesson-list",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\treOrderColumns: async (index, kind = 'down') => {\n\t\tconsole.log(index);\n\t\tlet reOrder = {\"\": true};\n\t\tlet currentColumns = table_edit_order.tableData;\n\t\tif (kind == 'down') {\n\t\t\t[currentColumns[index],currentColumns[index +1]] = [currentColumns[index+1],currentColumns[index]];\n\t\t} else {\n\t\t\t[currentColumns[index],currentColumns[index -1]] = [currentColumns[index-1],currentColumns[index]];\n\t\t}\n\n\t\tfor (let i=0; i < currentColumns.length; i++) {\n\t\t\treOrder[currentColumns[i].Column] = currentColumns[i].Visible;\n\t\t}\n\t\tawait storeValue(\"lessonColumns\", reOrder);\n\t\tJS_Sort_Columns.convertLessonCols(reOrder);\n\t\treturn true;\n\t},\n\tloadLessonCols: async () => {\n\t\tif (!appsmith.store.lessonColumns) {\n\t\t\tstoreValue(\"lessonColumns\", {\n\t\t\t\t\"\": true,\n\t\t\t\t\"Lesson Date\": true,\n\t\t\t\t\"Lesson Status\": true,\n\t\t\t\t\"Lesson Time\": true,\n\t\t\t\t\"Day\": true, \n\t\t\t\t\"Location\": true,\n\t\t\t\t\"Teacher\": true,\n\t\t\t\t\"Teaching Method\": true,\n\t\t\t\t\"Teaching Medium\": true,\n\t\t\t\t\"Course\": true,\n\t\t\t\t\"Class\": true\n\t\t\t});\n\t\t};\n\t\tJS_Sort_Columns.convertLessonCols(appsmith.store.lessonColumns);\n\t\treturn true;\n\t},\n\tconvertLessonCols: (object) => {\n\t\tlet results = [];\n\t\tlet customColumns = [];\n\t\tObject.entries(object).forEach(([key, value], index) => {\n\t\t\tcustomColumns.push(key);\n\t\t\tif (key != \"\") {\n\t\t\t\tresults.push({\n\t\t\t\t\t\"Column\": key,\n\t\t\t\t\t\"Visible\": value,\n\t\t\t\t\t\"Down\": index - 1,\n\t\t\t\t\t\"Up\": index - 1\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tstoreValue(\"lessonColsTable\", results);\n\t\tstoreValue(\"table_future_lesson_customColumns\", customColumns);\n\t\tstoreValue(\"table_past_lesson_customColumns\", customColumns);\n\t\tresetWidget(\"table_future_lesson\");\n\t\tresetWidget(\"table_past_lesson\");\n\t},\n\tsaveVisibleColumn: async () => {\n\t\tlet currentColumns = appsmith.store.lessonColsTable;\n\t\tfor (let i=0; i < currentColumns.length; i++) {\n\t\t\t\tfor (const value of table_edit_order.updatedRows) {\n\t\t\t\t\tif (value.updatedFields.Visible != undefined) {\n\t\t\t\t\t\tcurrentColumns[value.index].Visible = value.updatedFields.Visible;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\t\tcurrentColumns = _.sortBy(currentColumns, ['Order']);\n\t\tlet results = {\"\": true};\n\t\tlet customColumns = [\"\"];\n\t\tfor (const value of currentColumns) {\n\t\t\tcustomColumns.push(value.Column);\n\t\t\tresults[value.Column] = value.Visible\n\t\t}\n\t\tstoreValue(\"table_future_lesson_customColumns\", customColumns);\n\t\tstoreValue(\"table_past_lesson_customColumns\", customColumns);\n\t\tawait storeValue(\"lessonColumns\", results);\n\t\tJS_Sort_Columns.convertLessonCols(results);\n\t\tresetWidget(\"table_future_lesson\");\n\t\tresetWidget(\"table_past_lesson\");\n\t\treturn true;\n  },\n}",
    "variables": [],
    "userPermissions": []
  },
  "id": "architecture-lesson-list_JS_Sort_Columns",
  "deleted": false,
  "gitSyncId": "6385e81eae597f4a7a4e81fd_6387f9d54e462026e4cc64a6"
}