{
  "unpublishedCollection": {
    "name": "JS_LessonList",
    "pageId": "architecture-lesson-list",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tgetVisibleColumn: () => {\n\t\tlet results = [];\n\t\tfor (const key in appsmith.store.lessonColumns) {\n\t\t\tif(appsmith.store.lessonColumns[key]) {\n\t\t\t\tresults.push(key);\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t},\n\tsetToken: async () => {\n\t\tstoreValue(\"token\", \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImM2NzQ3NWMwM2NjNjQwMjY0YjBhOTRkMTQ0N2YzYjU3OTBiMmFiZDQifQ.eyJpc3MiOiJtYW5hYmllIiwic3ViIjoiMDFGUUdUQVlCNThDN1A0WUNBRjFHNUM1NTEiLCJhdWQiOiJtYW5hYmllLXN0YWciLCJleHAiOjE2NzEwMTA0OTQsImlhdCI6MTY3MTAwNjg5MCwianRpIjoiMDFHTTdXQkFERzRaQzhZWUY3UlNGWUNFRTUiLCJodHRwczovL2hhc3VyYS5pby9qd3QvY2xhaW1zIjp7IngtaGFzdXJhLWFsbG93ZWQtcm9sZXMiOlsiVVNFUl9HUk9VUF9TQ0hPT0xfQURNSU4iXSwieC1oYXN1cmEtZGVmYXVsdC1yb2xlIjoiVVNFUl9HUk9VUF9TQ0hPT0xfQURNSU4iLCJ4LWhhc3VyYS11c2VyLWlkIjoiMDFGUUdUQVlCNThDN1A0WUNBRjFHNUM1NTEiLCJ4LWhhc3VyYS1zY2hvb2wtaWRzIjoiey0yMTQ3NDgzNjQ4fSIsIngtaGFzdXJhLXVzZXItZ3JvdXAiOiJVU0VSX0dST1VQX1NDSE9PTF9BRE1JTiIsIngtaGFzdXJhLXJlc291cmNlLXBhdGgiOiItMjE0NzQ4MzY0OCJ9LCJtYW5hYmllIjp7ImFsbG93ZWRfcm9sZXMiOlsiVVNFUl9HUk9VUF9TQ0hPT0xfQURNSU4iXSwiZGVmYXVsdF9yb2xlIjoiVVNFUl9HUk9VUF9TQ0hPT0xfQURNSU4iLCJ1c2VyX2lkIjoiMDFGUUdUQVlCNThDN1A0WUNBRjFHNUM1NTEiLCJzY2hvb2xfaWRzIjpbIi0yMTQ3NDgzNjQ4Il0sInVzZXJfZ3JvdXAiOiJVU0VSX0dST1VQX1NDSE9PTF9BRE1JTiIsInJlc291cmNlX3BhdGgiOiItMjE0NzQ4MzY0OCJ9LCJyZXNvdXJjZV9wYXRoIjoiLTIxNDc0ODM2NDgiLCJ1c2VyX2dyb3VwIjoiVVNFUl9HUk9VUF9TQ0hPT0xfQURNSU4ifQ.k0dm_KY2f5HTQFr_jJQQCHvRf-IjTXYn1cPnulEpzwgMdyttBS_cVGDrdpVh-rTBHMFsKXlOC-2HoefBfQWXRZKYQF27nV2AwtXcHp5oMbpj_GTm61FE_8SlpKgaeGAfX2TcwQBRNJFtd8KEzTo_mhYXAXMMwIRlQik0EA2JJi4v_qQjpqL_Ece2Pf3JSB9GRrruLFEbc0Qw6DG1oQXi4vM2-uEVYgInozleE1DOOxTHqEVgwfo2Ca-FoS9RTCDCBXtliBZlzd7ahloupM4GzgVpyegFl3nG8X1cja8mlDws_uF8VsH9W59Qe991P8InvJPOMyYHXPU7EiIX-4qJVQ\");\n\t},\n\n\tformatTeacherOptions: () => {\n\t\tconst teacherList = Get_Teacher.data.data.staff;\n\t\treturn teacherList.map((item) => ({\n\t\t\tlabel: item.user.name,\n\t\t\tvalue: item.staff_id\n\t\t}))\n\t},\n\tformatLocationOptions: () => {\n\t\tconst locationList = Get_Location.data.data.get_locations_lowest_level;\n\t\treturn locationList.map((item) => ({\n\t\t\tlabel: item.name,\n\t\t\tvalue: item.location_id\n\t\t}))\n\t},\n\tformatStudentOptions: () => {\n\t\tconst studentList = Get_Student.data.data.users;\n\t\treturn studentList.map((item) => ({\n\t\t\tlabel: item.name,\n\t\t\tvalue: item.user_id\n\t\t}))\n\t},\n\tformatGradeOptions: () => {\n\t\tconst gradeList = Get_Course.data.data.grade;\n\t\treturn gradeList.map((item) => ({\n\t\t\tlabel: item.name,\n\t\t\tvalue: item.grade_id\n\t\t}))\n\t},\n\tloadLesson: async () => {\n\t\tstoreValue(\"isLoading\", true);\n\t\tconst lessons = tab_lesson.selectedTab === 'Future Lesson' ? await Architecture_Future_Lessons.run(\n\t\t\t{\n\t\t\t\tlimit: 10,\n\t\t\t\toffset: table_future_lesson.pageOffset,\n\t\t\t\ttime: moment().startOf('day').format('YYYY-MM-DD')\n\t\t\t}\n\t\t) : await Architecture_Past_Lessons.run(\n\t\t\t{\n\t\t\t\tlimit: 10,\n\t\t\t\toffset: table_past_lesson.pageOffset,\n\t\t\t\ttime: moment().startOf('day').format('YYYY-MM-DD')\n\t\t\t}\n\t\t)\n\t\tif (lessons.data) {\n\t\t\tif (tab_lesson.selectedTab === 'Future Lesson') {\n\t\t\t\tstoreValue(\"futureLessons\", lessons.data.lessons, false);\n\t\t\t\tstoreValue(\"futureTotalLesson\", lessons.data.lessons_aggregate.aggregate.count, false);\n\t\t\t} else {\n\t\t\t\tstoreValue(\"pastLessons\", lessons.data.lessons, false);\n\t\t\t\tstoreValue(\"pastTotalLesson\", lessons.data.lessons_aggregate.aggregate.count, false);\n\t\t\t}\n\t\t}\n\t\tstoreValue(\"isLoading\", false);\n\t\treturn true;\n\t},\n\tgetTableFutureOffset: () => {\n\t\treturn table_future_lesson.pageOffset;\n\t},\n\tgetTablePastOffset: () => {\n\t\treturn table_past_lesson.pageOffset;\n\t},\n\tconvertLessonStatus: (status) => {\n\t\tif(status == 'LESSON_SCHEDULING_STATUS_PUBLISHED') {\n\t\t\treturn {\n\t\t\t\t\"text\": \"Published\",\n\t\t\t\t\"color\": \"rgb(156, 39, 176)\"\n\t\t\t};\n\t\t} else if(status == 'LESSON_SCHEDULING_STATUS_DRAFT') {\n\t\t\treturn {\n\t\t\t\t\"text\": \"Draft\",\n\t\t\t\t\"color\": \"rgb(117, 117, 117)\"\n\t\t\t};\n\t\t} else if(status == 'LESSON_SCHEDULING_STATUS_COMPLETED') {\n\t\t\treturn {\n\t\t\t\t\"text\": \"Completed\",\n\t\t\t\t\"color\": \"rgb(59, 135, 62)\"\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\t\"text\": \"Cancelled\",\n\t\t\t\t\"color\": \"rgb(244, 67, 54)\"\n\t\t\t};\n\t\t}\n\t}\n}",
    "variables": [],
    "userPermissions": []
  },
  "id": "architecture-lesson-list_JS_LessonList",
  "deleted": false,
  "gitSyncId": "6385e81eae597f4a7a4e81fd_6386afb1ae597f4a7a4e8225"
}