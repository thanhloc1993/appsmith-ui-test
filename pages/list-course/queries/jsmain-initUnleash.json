{
  "pluginType": "JS",
  "pluginId": "js-plugin",
  "unpublishedAction": {
    "name": "initUnleash",
    "fullyQualifiedName": "jsmain.initUnleash",
    "datasource": {
      "name": "UNUSED_DATASOURCE",
      "pluginId": "js-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "list-course",
    "collectionId": "list-course_jsmain",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "async () => {\n  const mappingEnv = {\n    \"staging\": \"stag\",\n    \"uat\": \"uat\",\n    \"master\": \"prod\"\n  };\n  let checkEnvAndOrg = function (env, orgID, strategies) {\n    let found = false;\n    for (let i = 0; i < strategies.length; i++) {\n      if (strategies[i].name == 'strategy_environment') {\n        const environments = strategies[i].parameters.environments.split(\",\");\n        for (let e = 0; e < environments.length; e++) {\n          if (environments[e] == env) {\n            found = true;\n            break;\n          }\n        }\n      }\n      if (strategies[i].name == 'strategy_organization' && orgID != undefined && found) {\n        found = false;\n        const organizations = strategies[i].parameters.organizations.split(\",\");\n        for (let o = 0; o < organizations.length; o++) {\n          if (organizations[o] == orgID) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n    return found;\n  };\n  const env = mappingEnv[appsmith.URL.queryParams[\"env\"]] ? mappingEnv[appsmith.URL.queryParams[\"env\"]] : \"stag\";\n  const orgID = appsmith.URL.queryParams[\"organization\"];\n  const results = await Unleash_Features.run();\n  const features = results.features.map(feature => {\n    return {\n      ...feature,\n      enabled: feature.enabled && checkEnvAndOrg(env, orgID, feature.strategies)\n    };\n  });\n  console.log(features);\n  for (let i = 0; i < features.length; i++) {\n    storeValue(features[i].name, features[i].enabled);\n  }\n  return features.length;\n}",
      "jsArguments": [],
      "isAsync": true
    },
    "executeOnLoad": true,
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [
      "async () => {\n  const mappingEnv = {\n    \"staging\": \"stag\",\n    \"uat\": \"uat\",\n    \"master\": \"prod\"\n  };\n  let checkEnvAndOrg = function (env, orgID, strategies) {\n    let found = false;\n    for (let i = 0; i < strategies.length; i++) {\n      if (strategies[i].name == 'strategy_environment') {\n        const environments = strategies[i].parameters.environments.split(\",\");\n        for (let e = 0; e < environments.length; e++) {\n          if (environments[e] == env) {\n            found = true;\n            break;\n          }\n        }\n      }\n      if (strategies[i].name == 'strategy_organization' && orgID != undefined && found) {\n        found = false;\n        const organizations = strategies[i].parameters.organizations.split(\",\");\n        for (let o = 0; o < organizations.length; o++) {\n          if (organizations[o] == orgID) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n    return found;\n  };\n  const env = mappingEnv[appsmith.URL.queryParams[\"env\"]] ? mappingEnv[appsmith.URL.queryParams[\"env\"]] : \"stag\";\n  const orgID = appsmith.URL.queryParams[\"organization\"];\n  const results = await Unleash_Features.run();\n  const features = results.features.map(feature => {\n    return {\n      ...feature,\n      enabled: feature.enabled && checkEnvAndOrg(env, orgID, feature.strategies)\n    };\n  });\n  console.log(features);\n  for (let i = 0; i < features.length; i++) {\n    storeValue(features[i].name, features[i].enabled);\n  }\n  return features.length;\n}"
    ],
    "userSetOnLoad": true,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": []
  },
  "id": "list-course_jsmain.initUnleash",
  "deleted": false,
  "gitSyncId": "6360798db3ce396b06d52e39_6361d48eb3ce396b06d52f20"
}