{
  "unpublishedCollection": {
    "name": "Unleash_Course",
    "pageId": "course-list",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tinitUnleash: async () => {\n\t\tconst mappingEnv = {\n\t\t\t\"staging\": \"stag\",\n\t\t\t\"uat\": \"uat\",\n\t\t\t\"master\": \"prod\"\n\t\t}\n\t\tlet checkEnvAndOrg = function(env, orgID, strategies) {\n\t\t\t\tlet found = false;\n\t\t\t\tfor (let i = 0; i < strategies.length; i++) {\n\t\t\t\t\tif (strategies[i].name == 'strategy_environment') {\n\t\t\t\t\t\tconst environments = strategies[i].parameters.environments.split(\",\");\n\t\t\t\t\t\tfor (let e = 0; e < environments.length; e++) {\n\t\t\t\t\t\t\tif (environments[e] == env) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} \n\t\t\t\t\t}\n\t\t\t\t\tif (strategies[i].name == 'strategy_organization' && orgID != undefined && found) {\n\t\t\t\t\t\tfound = false;\n\t\t\t\t\t\tconst organizations = strategies[i].parameters.organizations.split(\",\");\n\t\t\t\t\t\tfor (let o = 0; o < organizations.length; o++) {\n\t\t\t\t\t\t\tif (organizations[o] == orgID) {\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn found;\n\t\t};\n\t\tconst env = mappingEnv[appsmith.URL.queryParams[\"branch\"]] ? mappingEnv[appsmith.URL.queryParams[\"branch\"]] : \"stag\";\n\t\tconst orgID = appsmith.URL.queryParams[\"organization\"]\n\t\tconsole.log(env, orgID);\n\t\tconst results = await Unleash.run();\n\t\tconst features = results.features.map((feature) => {\n\t\t\treturn {\n\t\t\t\t...feature,\n\t\t\t\tenabled: feature.enabled && checkEnvAndOrg(env, orgID, feature.strategies)\n\t\t\t};\n\t\t})\n\t\tconsole.log( features);\n\t\tfor (let i = 0; i < features.length; i++) {\n\t\t\tstoreValue(features[i].name, features[i].enabled);\n\t\t}\n\t\treturn features.length\n\t}\n\n}",
    "variables": [],
    "userPermissions": []
  },
  "id": "course-list_Unleash_Course",
  "deleted": false,
  "gitSyncId": "637dc0bc0b93ed5dcbd281d4_637f46fe2741490e0fbf5bec"
}